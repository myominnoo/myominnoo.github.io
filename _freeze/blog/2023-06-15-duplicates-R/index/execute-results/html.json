{
  "hash": "61745c59701b74af4ac7da83f59113a3",
  "result": {
    "markdown": "---\ntitle: \"Duplicates in R\"\nsubtitle: \"List, tag, report duplicates in R like STATA\"\nauthor: \"Myo Minn Oo\"\ndate: 2023-06-15\ndate-modified: last-modified\ndate-format: long\ncategories: \n  - R\n  - Data Wrangling\ntoc-location: right\npage-layout: article\nimage: duplicates-R-featured.jpeg\n---\n\n\n## Replicate examples on UCLA's STATA tutorial in R\n\n> **Citation**: HOW CAN I DETECT DUPLICATE OBSERVATIONS? \\| STATA FAQ. UCLA: Statistical Consulting Group. from <https://stats.oarc.ucla.edu/stata/faq/how-can-i-detect-duplicate-observations-3/> (accessed June 15, 2023).\n\nThe tutorial on the website used the High School and Beyond dataset. Here are the steps taken to introduce duplicates to the dataset.\n\n1.  Start with the High School and Beyond dataset, which initially has no duplicate observations.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    library(tidyverse)\n    hsb2 <- \n    \t# load the dataset\n    \thaven::read_dta(\"https://stats.idre.ucla.edu/stat/stata/notes/hsb2.dta\") |>\n    \t# select variables of interest\n    \tselect(id, female, ses, read, write, math) |> \n    \t# sort by id\n    \tarrange(id)\n    ```\n    :::\n\n\n2.  Add five duplicate observations to the dataset to create duplicates. Change a value in one of the duplicate observations.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    hsb2_mod <- \n    \thsb2 |> \n    \t# take the first five observations\n    \tslice(1:5) |> \n    \t# add duplicate observations\n    \tbind_rows(hsb2) |> \n    \tmutate(math = ifelse(row_number() == 1, 84, math))\n    # display the first few rows\n    hsb2_mod\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    # A tibble: 205 × 6\n          id female     ses         read write  math\n       <dbl> <dbl+lbl>  <dbl+lbl>  <dbl> <dbl> <dbl>\n     1     1 1 [female] 1 [low]       34    44    84\n     2     2 1 [female] 2 [middle]    39    41    33\n     3     3 0 [male]   1 [low]       63    65    48\n     4     4 1 [female] 1 [low]       44    50    41\n     5     5 0 [male]   1 [low]       47    40    43\n     6     1 1 [female] 1 [low]       34    44    40\n     7     2 1 [female] 2 [middle]    39    41    33\n     8     3 0 [male]   1 [low]       63    65    48\n     9     4 1 [female] 1 [low]       44    50    41\n    10     5 0 [male]   1 [low]       47    40    43\n    # ℹ 195 more rows\n    ```\n    :::\n    :::\n\n\n3.  After adding the duplicate observations, you will have a total of 195 unique observations and 5 duplicated observations in the dataset. We can use the `tag_duplicates()` function from the `mStats` package.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    hsb2_mod |> \n    \t# check duplicate report and status using a mStats function\n    \tmutate(mStats::tag_duplicates(everything()))\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    $ Report of duplicates\n      in terms of all variables\n     copies observations surplus\n          1          197       0\n          2            8       4\n    ```\n    :::\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    # A tibble: 205 × 9\n          id female     ses         read write  math   .n_   .N_ .dup_\n       <dbl> <dbl+lbl>  <dbl+lbl>  <dbl> <dbl> <dbl> <int> <int> <lgl>\n     1     1 1 [female] 1 [low]       34    44    84     1     1 FALSE\n     2     2 1 [female] 2 [middle]    39    41    33     1     2 FALSE\n     3     3 0 [male]   1 [low]       63    65    48     1     2 FALSE\n     4     4 1 [female] 1 [low]       44    50    41     1     2 FALSE\n     5     5 0 [male]   1 [low]       47    40    43     1     2 FALSE\n     6     1 1 [female] 1 [low]       34    44    40     1     1 FALSE\n     7     2 1 [female] 2 [middle]    39    41    33     2     2 TRUE \n     8     3 0 [male]   1 [low]       63    65    48     2     2 TRUE \n     9     4 1 [female] 1 [low]       44    50    41     2     2 TRUE \n    10     5 0 [male]   1 [low]       47    40    43     2     2 TRUE \n    # ℹ 195 more rows\n    ```\n    :::\n    :::\n\n\n4.  Let's check duplicates by `id`.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    hsb2_mod |> \n    \t# check duplicates by id\n    \tmutate(mStats::tag_duplicates(id))\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    $ Report of duplicates\n      in terms of id\n     copies observations surplus\n          1          195       0\n          2           10       5\n    ```\n    :::\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    # A tibble: 205 × 9\n          id female     ses         read write  math   .n_   .N_ .dup_\n       <dbl> <dbl+lbl>  <dbl+lbl>  <dbl> <dbl> <dbl> <int> <int> <lgl>\n     1     1 1 [female] 1 [low]       34    44    84     1     2 FALSE\n     2     2 1 [female] 2 [middle]    39    41    33     1     2 FALSE\n     3     3 0 [male]   1 [low]       63    65    48     1     2 FALSE\n     4     4 1 [female] 1 [low]       44    50    41     1     2 FALSE\n     5     5 0 [male]   1 [low]       47    40    43     1     2 FALSE\n     6     1 1 [female] 1 [low]       34    44    40     2     2 TRUE \n     7     2 1 [female] 2 [middle]    39    41    33     2     2 TRUE \n     8     3 0 [male]   1 [low]       63    65    48     2     2 TRUE \n     9     4 1 [female] 1 [low]       44    50    41     2     2 TRUE \n    10     5 0 [male]   1 [low]       47    40    43     2     2 TRUE \n    # ℹ 195 more rows\n    ```\n    :::\n    :::\n\n\n5.  \n\n> **Photo credit**: [Photo by Dids from Pexels](https://www.pexels.com/photo/mysterious-woman-with-greasepaint-on-face-5782237/)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}